---
phase: 06-data-pipeline-integration
plan: 02
type: execute
depends_on: ["06-01"]
files_modified: [sc-ethics-monitor/data/party-data.json, sc-ethics-monitor/src/party_detector.py]
---

<objective>
Improve party detection from 25% to >75% by researching unknown candidates and enhancing detection.

Purpose: 21 of 28 candidates have UNKNOWN party, making strategic analysis impossible. Manual research and improved detection logic will close this gap.

Output: party-data.json updated with researched candidates, party detection >75%.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@sc-ethics-monitor/.planning/PROJECT.md
@sc-ethics-monitor/.planning/ROADMAP.md
@sc-ethics-monitor/.planning/phases/06-data-pipeline-integration/06-01-SUMMARY.md
@sc-ethics-monitor/src/party_detector.py
@sc-ethics-monitor/data/party-data.json

**Current State:**
- 28 candidates in system
- 7 have party detected (25%)
- 21 have UNKNOWN party (75%)
- party-data.json has ~40 entries for incumbents

**Known UNKNOWN candidates (from Phase 5):**
These need web research to determine party affiliation.

**Research Strategy:**
1. Use Firecrawl to search for each candidate name + "SC" + "2026"
2. Check SCVotes.gov, Ballotpedia, local news sources
3. Add confirmed parties to party-data.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Extract list of UNKNOWN candidates from Google Sheet</name>
  <files>sc-ethics-monitor/scripts/research_unknown_candidates.py</files>
  <action>
Create a new script `scripts/research_unknown_candidates.py` that:

1. Connects to Google Sheets
2. Reads Candidates tab
3. Filters rows where detected_party is empty or "UNKNOWN"
4. Outputs a list with: name, district, office, filing_date
5. Saves to `data/unknown_candidates.json` for research

This provides a clean working list for research.
  </action>
  <verify>
Run: `cd sc-ethics-monitor && python scripts/research_unknown_candidates.py`
Should create data/unknown_candidates.json with candidate list
  </verify>
  <done>
unknown_candidates.json created with 21 candidates needing research
  </done>
</task>

<task type="auto">
  <name>Task 2: Research candidates using Firecrawl web search</name>
  <files>sc-ethics-monitor/data/party-data.json</files>
  <action>
Use Firecrawl to research each unknown candidate:

For each candidate in unknown_candidates.json:
1. Search: "{candidate_name} South Carolina 2026 election"
2. Check results for party affiliation indicators:
   - "Republican" / "GOP" / "R-SC"
   - "Democrat" / "Democratic" / "D-SC"
3. Verify with secondary search if unclear
4. Add confirmed candidates to party-data.json with:
   ```json
   "Candidate Name": {
     "party": "Republican" or "Democratic",
     "source": "web search - [source URL]",
     "verified": "2026-01-22"
   }
   ```

Target: Research at least 15 of the 21 unknown candidates.
If Firecrawl unavailable, document which candidates remain unresearched.
  </action>
  <verify>
Count entries in party-data.json before and after
Run: `cd sc-ethics-monitor && cat data/party-data.json | python -c "import json,sys; d=json.load(sys.stdin); print(f'Candidates: {len(d.get(\"candidates\", {}))}')"`
  </verify>
  <done>
party-data.json updated with researched candidates (target: 15+ new entries)
  </done>
</task>

<task type="auto">
  <name>Task 3: Re-run party detection and verify improvement</name>
  <files>sc-ethics-monitor/src/party_detector.py</files>
  <action>
1. Re-run party detection with updated party-data.json:
   `python -c "from src.sheets_sync import SheetsSync; s=SheetsSync(); s.connect(); s.run_party_detection()"`

2. Or if run_party_detection doesn't exist, use monitor.py flow:
   `python -m src.monitor --dry-run --skip-scrape`

3. Check Google Sheet Candidates tab for updated detected_party values

4. Calculate new detection rate: (candidates with party) / (total candidates)
   Target: >75% (was 25%)
  </action>
  <verify>
Query Google Sheet for detection rate:
Run party detection flow and count results
Should show >21 of 28 candidates with party detected (>75%)
  </verify>
  <done>
Party detection rate >75% (was 25%)
  </done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] unknown_candidates.json created with research list
- [ ] party-data.json updated with 15+ new candidate entries
- [ ] Party detection re-run against updated data
- [ ] Detection rate improved from 25% to >75%
</verification>

<success_criteria>
- At least 15 of 21 unknown candidates researched and added to party-data.json
- Party detection rate >75% (>21 of 28 candidates)
- Documentation of any candidates that couldn't be researched
</success_criteria>

<output>
After completion, create `sc-ethics-monitor/.planning/phases/06-data-pipeline-integration/06-02-SUMMARY.md`
</output>
