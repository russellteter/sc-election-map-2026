---
phase: 01-data-enrichment
plan: 03
type: execute
depends_on: ["01-01", "01-02"]
sheets_modified:
  - Districts tab (columns P-R)
domain: google-sheets
---

<objective>
Add urban/rural classification and population-based helper columns to the Districts tab.

Purpose: Urban, suburban, and rural districts require different campaign strategies. Understanding district demographics helps allocate resources appropriately.

Output: Districts tab with urban/rural classification, estimated population, and district competitiveness composite score.
</objective>

<execution_context>
**Google Sheet:** https://docs.google.com/spreadsheets/d/17j_KFZFUw-ESBQlKlIccUMpGCFq_XdeL6WYph7zkxQo/edit

**Current Districts tab structure (after Plans 01-01 and 01-02):**
- A-H: Original district columns
- I-K: County/region columns (from 01-01)
- L-O: Incumbent enrichment columns (from 01-02)

**New columns to add (P-R):**
- P: district_type (Urban, Suburban, Rural, Mixed)
- Q: estimated_population (approximate, for context)
- R: composite_score (recruitment priority formula)

**District type definitions:**
- Urban: Primarily within major city limits (Charleston, Columbia, Greenville, etc.)
- Suburban: Surrounding major cities, high growth areas
- Rural: Low population density, agricultural areas
- Mixed: Contains significant urban and rural areas

**SC Major Urban Areas:**
- Charleston metro (Charleston, Berkeley, Dorchester counties)
- Columbia metro (Richland, Lexington counties)
- Greenville-Spartanburg metro (Greenville, Spartanburg counties)
- Myrtle Beach metro (Horry, Georgetown counties)

**Population reference:**
- SC House districts: ~40,000 people each (based on 2020 census)
- SC Senate districts: ~105,000 people each

**Composite score formula components:**
- term_status weight (Open = 3, First-term = 2, Veteran = 1, Long-serving = 0)
- margin weight (competitive <5% = 3, somewhat <10% = 2, safe >10% = 1, unopposed = 0)
- party weight (R incumbent = 2, Open = 2, D incumbent = 0)
</execution_context>

<tasks>

<task type="manual">
  <name>Task 1: Add geographic/demographic columns</name>
  <sheets>Districts tab</sheets>
  <action>
In Google Sheets:

1. Navigate to Districts tab
2. In cell P1, enter: `district_type`
3. In cell Q1, enter: `estimated_population`
4. In cell R1, enter: `composite_score`

5. Format headers:
   - Bold text
   - Background color matching existing headers

6. Set column widths:
   - Column P: 100px
   - Column Q: 130px
   - Column R: 110px

7. Add data validation for column P (district_type):
   - Select P2:P171
   - Data > Data validation
   - Criteria: List of items
   - Enter: Urban, Suburban, Rural, Mixed
   - Reject invalid input
  </action>
  <verify>
- Columns P-R have headers and formatting
- Dropdown works for district_type column
  </verify>
  <done>Geographic/demographic columns added with headers and validation</done>
</task>

<task type="manual">
  <name>Task 2: Classify House districts by urban/rural type</name>
  <sheets>Districts tab, rows 2-125</sheets>
  <action>
For each House district:

1. Use primary_county (column I) and region (column K) as guides
2. Research district composition on redistricting maps or census data
3. Assign district_type based on these guidelines:

**Urban districts (typically):**
- Richland County (Columbia): Most districts
- Charleston County (downtown Charleston): Several districts
- Greenville County (city of Greenville): Central districts
- Horry County (Myrtle Beach): Beach-adjacent districts

**Suburban districts:**
- Lexington County
- Berkeley County (North Charleston, Goose Creek)
- Dorchester County (Summerville)
- York County (Rock Hill, Fort Mill)
- Greenville County (suburbs)

**Rural districts:**
- Most of Upstate outside Greenville/Spartanburg
- Most of Pee Dee region
- Non-coastal Lowcountry

**Mixed districts:**
- Districts spanning city/county lines
- Districts with significant urban AND rural areas

4. Enter population estimate (use ~40,000 for House districts, adjust if known)
  </action>
  <verify>
- All 124 House districts have district_type
- Classification aligns with region and county
- No blank cells in column P
  </verify>
  <done>All House districts classified as Urban/Suburban/Rural/Mixed</done>
</task>

<task type="manual">
  <name>Task 3: Classify Senate districts by urban/rural type</name>
  <sheets>Districts tab, rows 126-171</sheets>
  <action>
For each Senate district:

1. Senate districts are larger, often spanning multiple counties
2. Use all_counties (column J) to determine mix
3. Classify based on population centers within district

**Note:** More Senate districts will be "Mixed" due to their larger geographic size.

4. Enter population estimate (use ~105,000 for Senate districts, adjust if known)
  </action>
  <verify>
- All 46 Senate districts have district_type
- Multi-county districts appropriately classified
  </verify>
  <done>All Senate districts classified as Urban/Suburban/Rural/Mixed</done>
</task>

<task type="manual">
  <name>Task 4: Add composite recruitment score formula</name>
  <sheets>Districts tab, column R</sheets>
  <action>
Create a composite score formula that combines multiple factors for recruitment prioritization:

1. In cell R2, enter this formula:
```
=IF(E2="",
  10,
  (IF(O2="Open", 3, IF(O2="First-term", 2, IF(O2="Veteran", 1, 0)))
  + IF(AND(ISNUMBER(M2), M2<5), 3, IF(AND(ISNUMBER(M2), M2<10), 2, IF(ISNUMBER(M2), 1, 0)))
  + IF(F2="R", 2, IF(E2="", 2, 0)))
)
```

**Score interpretation:**
- 8-10: High priority (Open seat or competitive R)
- 5-7: Medium priority (First-term or somewhat competitive)
- 2-4: Low priority (Safe incumbent)
- 0-1: Very low priority (Safe D incumbent)

2. Copy formula to R3:R171

3. Add conditional formatting to column R:
   - 8-10: Red background (high priority)
   - 5-7: Yellow background (medium)
   - 2-4: Light green (low)
   - 0-1: Green (very low)

4. Protect column R (formula column)
  </action>
  <verify>
- Composite score calculates for all districts
- Open seats show score of 10
- Competitive R incumbents show high scores
- Safe D incumbents show low scores
  </verify>
  <done>Composite recruitment score formula working with conditional formatting</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete data enrichment for Districts tab with county, incumbent, and geographic data</what-built>
  <how-to-verify>
1. Open the Google Sheet: https://docs.google.com/spreadsheets/d/17j_KFZFUw-ESBQlKlIccUMpGCFq_XdeL6WYph7zkxQo/edit
2. Go to Districts tab
3. Verify columns I-R are populated:
   - I: primary_county (all 170 filled)
   - J: all_counties (all 170 filled)
   - K: region (all 170 filled, Upstate/Midlands/Lowcountry/Pee Dee)
   - L: terms_served (formula calculating correctly)
   - M: last_election_margin (populated where available)
   - N: last_election_votes (populated where available)
   - O: term_status (formula showing First-term/Veteran/Long-serving/Open)
   - P: district_type (all 170 filled, Urban/Suburban/Rural/Mixed)
   - Q: estimated_population (all 170 have estimates)
   - R: composite_score (formula calculating 0-10)
4. Check conditional formatting is working (colors on margin and score)
5. Test dropdowns on validated columns
6. Run Python dry-run: `python -m src.monitor --dry-run`
7. Verify no errors (Python doesn't touch new columns)
  </how-to-verify>
  <resume-signal>Type "approved" if all checks pass, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 170 districts have district_type (Urban/Suburban/Rural/Mixed)
- [ ] All 170 districts have population estimates
- [ ] composite_score formula calculates correctly
- [ ] High-priority districts (score 8+) are highlighted
- [ ] Conditional formatting applied to score column
- [ ] Python sync still works: `python -m src.monitor --dry-run`
</verification>

<success_criteria>
- Districts tab fully enriched with all planned columns (I-R)
- Urban/rural classification enables demographic targeting
- Composite score provides quick recruitment prioritization
- Phase 1 Data Enrichment complete
- Ready for Phase 2 Usability Improvements
</success_criteria>

<output>
After completion, create `.planning/phases/01-data-enrichment/01-03-SUMMARY.md` with:
- District type distribution (count by Urban/Suburban/Rural/Mixed)
- Top 10 highest composite score districts
- Breakdown by region and district type
- Total data enrichment accomplishments from Phase 1
- Recommendations for Phase 2
</output>
