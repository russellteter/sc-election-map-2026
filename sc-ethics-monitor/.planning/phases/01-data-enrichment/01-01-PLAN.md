---
phase: 01-data-enrichment
plan: 01
type: execute
depends_on: []
sheets_modified:
  - Districts tab (columns I+)
domain: google-sheets
---

<objective>
Add county mapping to the Districts tab, enabling county-level analysis and regional grouping.

Purpose: SC legislative districts often span multiple counties, but knowing the primary county for each district enables county-level campaign coordination and reporting.

Output: Districts tab with county columns populated for all 170 districts.
</objective>

<execution_context>
**Google Sheet:** https://docs.google.com/spreadsheets/d/17j_KFZFUw-ESBQlKlIccUMpGCFq_XdeL6WYph7zkxQo/edit

**Current Districts tab structure (columns A-H):**
- A: district_id (e.g., "SC-House-042")
- B: district_name
- C: chamber (House/Senate)
- D: district_number
- E: incumbent_name
- F: incumbent_party
- G: incumbent_since
- H: next_election

**New columns to add (I-K):**
- I: primary_county (main county for the district)
- J: all_counties (comma-separated list if multi-county)
- K: region (Upstate/Midlands/Lowcountry/Pee Dee)

**SC Counties (46 total):** Abbeville, Aiken, Allendale, Anderson, Bamberg, Barnwell, Beaufort, Berkeley, Calhoun, Charleston, Cherokee, Chester, Chesterfield, Clarendon, Colleton, Darlington, Dillon, Dorchester, Edgefield, Fairfield, Florence, Georgetown, Greenville, Greenwood, Hampton, Horry, Jasper, Kershaw, Lancaster, Laurens, Lee, Lexington, Marion, Marlboro, McCormick, Newberry, Oconee, Orangeburg, Pickens, Richland, Saluda, Spartanburg, Sumter, Union, Williamsburg, York

**SC Regions:**
- Upstate: Greenville, Spartanburg, Anderson, Pickens, Oconee, Cherokee, York, Chester, Lancaster, Union, Laurens, Abbeville, Greenwood, McCormick, Edgefield
- Midlands: Richland, Lexington, Kershaw, Fairfield, Newberry, Saluda, Aiken, Calhoun, Orangeburg
- Lowcountry: Charleston, Berkeley, Dorchester, Beaufort, Jasper, Colleton, Hampton, Allendale, Bamberg, Barnwell
- Pee Dee: Florence, Horry, Georgetown, Marion, Dillon, Marlboro, Darlington, Chesterfield, Lee, Clarendon, Sumter, Williamsburg

**Reference data:** Use SC legislature website for district-to-county mapping
</execution_context>

<tasks>

<task type="manual">
  <name>Task 1: Add county columns to Districts tab</name>
  <sheets>Districts tab</sheets>
  <action>
In Google Sheets:

1. Navigate to Districts tab
2. In cell I1, enter: `primary_county`
3. In cell J1, enter: `all_counties`
4. In cell K1, enter: `region`

5. Format the new header row:
   - Bold text
   - Background color matching existing headers
   - Freeze row 1 if not already frozen

6. Set column widths:
   - Column I: 120px
   - Column J: 200px
   - Column K: 100px
  </action>
  <verify>Columns I, J, K have headers and formatting matches existing columns</verify>
  <done>Districts tab has primary_county, all_counties, region columns with formatted headers</done>
</task>

<task type="manual">
  <name>Task 2: Populate county data for House districts</name>
  <sheets>Districts tab, rows 2-125 (House districts)</sheets>
  <action>
For each House district (SC-House-001 through SC-House-124):

1. Look up the district on scstatehouse.gov or ballotpedia
2. Identify the primary county (county with most population in district)
3. List all counties if district spans multiple
4. Assign region based on primary county

**Data entry pattern:**
| district_id | primary_county | all_counties | region |
|-------------|----------------|--------------|--------|
| SC-House-001 | Greenville | Greenville | Upstate |
| SC-House-042 | Richland | Richland, Kershaw | Midlands |

**Efficiency tip:** Work in batches by county - complete all districts in Greenville before moving to Spartanburg, etc.

**Quality check:** Each district must have:
- Exactly one primary_county
- At least one county in all_counties
- Valid region from the four options
  </action>
  <verify>
- All 124 House districts have county data
- No blank cells in columns I-K for House rows
- Region matches primary county's geographic location
  </verify>
  <done>All 124 House districts have county and region data populated</done>
</task>

<task type="manual">
  <name>Task 3: Populate county data for Senate districts</name>
  <sheets>Districts tab, rows 126-171 (Senate districts)</sheets>
  <action>
For each Senate district (SC-Senate-001 through SC-Senate-046):

1. Look up the district on scstatehouse.gov or ballotpedia
2. Identify the primary county
3. List all counties (Senate districts typically span multiple)
4. Assign region

**Note:** Senate districts are larger and usually span 2-4 counties. Be thorough in listing all_counties.
  </action>
  <verify>
- All 46 Senate districts have county data
- No blank cells in columns I-K for Senate rows
- Multi-county districts have all counties listed
  </verify>
  <done>All 46 Senate districts have county and region data populated</done>
</task>

<task type="manual">
  <name>Task 4: Add data validation for new columns</name>
  <sheets>Districts tab, columns I-K</sheets>
  <action>
Add data validation to ensure data quality:

1. **Column I (primary_county):**
   - Select I2:I171
   - Data > Data validation
   - Criteria: List of items
   - Enter all 46 SC county names (comma-separated)
   - Show warning on invalid data

2. **Column K (region):**
   - Select K2:K171
   - Data > Data validation
   - Criteria: List of items
   - Enter: Upstate, Midlands, Lowcountry, Pee Dee
   - Show warning on invalid data

3. **Column J (all_counties):**
   - No validation (free-form comma-separated list)
   - Consider adding a note: "Comma-separated list of counties"
  </action>
  <verify>
- Dropdown appears when clicking cell in column I
- Dropdown appears when clicking cell in column K
- Invalid entries show warning
  </verify>
  <done>Data validation rules applied to primary_county and region columns</done>
</task>

<task type="manual">
  <name>Task 5: Add county aggregation formulas</name>
  <sheets>New section or hidden calculations area</sheets>
  <action>
Create helper formulas for county-level aggregations:

1. In a calculation area (or new "Calculations" tab), add:

**County summary formula (count districts per county):**
```
=COUNTIF(Districts!I:I, "Greenville")
```

**Region summary (count districts per region):**
```
=COUNTIF(Districts!K:K, "Upstate")
```

2. Consider adding a summary section at the bottom of Districts tab (after row 171):
   - Row 173: "County Summary"
   - Rows 174+: COUNTIF formulas for each county

3. Or defer this to Phase 3 (Dashboard tab) - document decision.
  </action>
  <verify>County and region counts calculate correctly</verify>
  <done>County aggregation formulas working (or documented for Phase 3)</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] All 170 districts have primary_county populated
- [ ] All 170 districts have region populated
- [ ] Data validation dropdowns work for county and region
- [ ] No blank cells in new columns
- [ ] Python sync still works (dry-run test: `python -m src.monitor --dry-run`)
</verification>

<success_criteria>
- Districts tab enriched with county and region data
- 100% of districts have valid county assignment
- Data validation prevents invalid entries
- Existing sync functionality unaffected
</success_criteria>

<output>
After completion, create `.planning/phases/01-data-enrichment/01-01-SUMMARY.md` with:
- Counties discovered to have most districts
- Any districts with unclear county mapping
- Time spent on data entry
- Recommendations for Phase 2
</output>
