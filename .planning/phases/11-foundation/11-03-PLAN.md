---
phase: 11-foundation
plan: 03
type: execute
depends_on: []
files_modified: [src/components/VoterGuide/MiniMapPreview.tsx, src/app/voter-guide/page.tsx]
domain: frontend
---

<objective>
Create MiniMapPreview component for Voter Guide showing user's district highlighted on a small state map thumbnail.

Purpose: Give users visual context of where their district is located when viewing their personalized ballot. The mini map serves as a "you are here" indicator.
Output: MiniMapPreview component that renders a small, non-interactive SVG map with the user's district highlighted.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

**Source files:**
@src/app/voter-guide/page.tsx
@src/components/Map/DistrictMap.tsx (reference for SVG loading pattern)

**Key patterns:**
- DistrictMap fetches SVG from /maps/{state}-{chamber}-districts.svg
- District paths have id format: house-{num} or senate-{num}
- Voter Guide has access to: selectedCounty, houseDistrict, senateDistrict

**Constraints:**
- Must be small (thumbnail size: ~150x100px)
- Non-interactive (no hover, click, keyboard)
- Should load quickly (SVG is already cached from main DistrictMap usage)
- Accessible: include alt text for screen readers
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create MiniMapPreview component</name>
  <files>src/components/VoterGuide/MiniMapPreview.tsx</files>
  <action>
Create a compact, non-interactive map preview showing the user's district highlighted.

**Component API:**
```tsx
interface MiniMapPreviewProps {
  stateCode: string;          // 'sc', 'nc', etc.
  chamber: 'house' | 'senate';
  highlightedDistrict: number | null;
  className?: string;
}
```

**Implementation:**
1. Fetch SVG same pattern as DistrictMap (basePath handling)
2. Parse SVG and apply styles:
   - All districts: light gray fill (#E2E8F0)
   - Highlighted district: class-purple (#1E40AF) with slight glow
   - No stroke enhancement (keep minimal)
3. Set SVG to be non-interactive:
   - pointer-events: none on all paths
   - Remove tabindex, role, aria attributes from paths
4. Add aria-label to container: "Map showing District {num} in {State} {Chamber}"
5. Apply compact sizing via CSS

**Styling:**
```css
.mini-map-preview {
  width: 150px;
  height: auto;
  max-height: 100px;
  opacity: 0.9;
}

.mini-map-preview svg {
  width: 100%;
  height: auto;
}

.mini-map-highlight {
  fill: var(--class-purple);
  filter: drop-shadow(0 0 4px rgba(30, 64, 175, 0.5));
}
```

**What to avoid:**
- Don't add click/hover handlers
- Don't use the full DistrictMap component (too heavy for thumbnail)
- Don't animate the highlight (static is fine for thumbnail)
  </action>
  <verify>TypeScript compiles; component renders small map</verify>
  <done>MiniMapPreview.tsx created with highlighted district display</done>
</task>

<task type="auto">
  <name>Task 2: Add mini-map styles to globals.css</name>
  <files>src/app/globals.css</files>
  <action>
Add CSS classes for the mini map preview component.

**Add after map zoom container styles:**
```css
/* MINI MAP PREVIEW */
.mini-map-preview {
  width: 150px;
  height: auto;
  max-height: 100px;
  border-radius: 8px;
  overflow: hidden;
  background: var(--glass-background);
  border: 1px solid var(--border-subtle);
}

.mini-map-preview svg {
  width: 100%;
  height: auto;
  display: block;
}

.mini-map-preview path {
  fill: var(--color-empty);
  stroke: var(--map-stroke);
  stroke-width: 0.3;
  pointer-events: none;
}

.mini-map-preview .district-highlighted {
  fill: var(--class-purple);
  filter: drop-shadow(0 0 3px rgba(30, 64, 175, 0.4));
}

/* Dark mode support (if added later) */
@media (prefers-color-scheme: dark) {
  .mini-map-preview {
    background: rgba(30, 41, 59, 0.8);
  }
}
```

**What to avoid:**
- Don't modify existing district-path styles
- Don't add hover effects (non-interactive)
  </action>
  <verify>npm run lint passes; styles don't conflict</verify>
  <done>Mini map preview styles added to globals.css</done>
</task>

<task type="auto">
  <name>Task 3: Integrate MiniMapPreview in Voter Guide</name>
  <files>src/app/voter-guide/page.tsx</files>
  <action>
Add MiniMapPreview to the Voter Guide page, showing user's district after address lookup.

**Placement:**
Add the mini map in the ballot header section, after the user's address/district info is displayed. Look for where houseDistrict and senateDistrict are shown.

**Integration:**
1. Import MiniMapPreview component
2. Add conditional render when user has district selected:
```tsx
{selectedCounty && houseDistrict && (
  <div className="flex items-start gap-4">
    <div className="flex-1">
      {/* Existing district info */}
    </div>
    <MiniMapPreview
      stateCode="sc"
      chamber="house"
      highlightedDistrict={houseDistrict}
      className="hidden sm:block"
    />
  </div>
)}
```

**Notes:**
- Hide on mobile (hidden sm:block) to save space
- Show House district map by default (most relevant for local races)
- Position to the right of district info

**What to avoid:**
- Don't restructure existing Voter Guide layout significantly
- Don't show map before user has entered address
- Don't add multiple maps (one is enough for context)
  </action>
  <verify>npm run dev; voter-guide shows mini map after address lookup</verify>
  <done>MiniMapPreview integrated into Voter Guide page</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without errors
- [ ] `npm run lint` passes
- [ ] Voter Guide loads at localhost:3000/voter-guide
- [ ] After entering SC address, mini map appears showing district
- [ ] Highlighted district is visually distinct (blue with glow)
- [ ] Mini map is non-interactive (no hover/click effects)
- [ ] Screen reader announces district location via aria-label
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Mini map provides helpful visual context
- Component is lightweight and fast to render
- Phase 11 Foundation complete - ready for Phase 12 Leaflet Integration
</success_criteria>

<output>
After completion, create `.planning/phases/11-foundation/11-03-SUMMARY.md`:

---
phase: 11-foundation
plan: 03
subsystem: voter-guide
tags: [maps, preview, accessibility]

requires: []
provides:
  - MiniMapPreview component
  - District thumbnail pattern
affects: [voter-guide]

tech-stack:
  added: []
  patterns: [SVG thumbnail rendering]

key-files:
  created:
    - src/components/VoterGuide/MiniMapPreview.tsx
  modified:
    - src/app/globals.css
    - src/app/voter-guide/page.tsx

key-decisions: []
patterns-established:
  - Non-interactive SVG map thumbnails
issues-created: []
---

# Phase 11 Plan 03: MiniMapPreview Summary

**[One-liner about what shipped]**

## Accomplishments

- Created MiniMapPreview component for district visualization
- Added mini map CSS styles to design system
- Integrated preview in Voter Guide after address lookup

## Files Created/Modified

- `src/components/VoterGuide/MiniMapPreview.tsx` - New component
- `src/app/globals.css` - Mini map styles
- `src/app/voter-guide/page.tsx` - Integration

## Decisions Made

[Any decisions, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Phase 11 complete. Ready for Phase 12: Leaflet Integration.
</output>
