---
phase: 02-county-candidate-data
plan: 01
type: execute
depends_on: ["01-01"]
files_modified:
  - scripts/generate-county-candidates.py
  - public/data/county-races.json
---

<objective>
Populate county-races.json with demo candidate data for all 46 SC counties.

Purpose: Enable the voter guide to display county-level races for any SC address, not just the 10 most populous counties currently covered.

Output: Complete county-races.json with incumbents and demo candidates for all 46 counties, 7 offices each (Sheriff, Auditor, Treasurer, Coroner, Clerk of Court, Register of Deeds, Probate Judge).
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-plan.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-data-file-scaffolding/01-01-SUMMARY.md

# Current state:
# - county-races.json has 10 of 46 counties populated
# - Each county has 7 office types with incumbent info but empty candidates arrays
# - SC_COUNTIES in congressionalLookup.ts defines all 46 counties with FIPS codes

@src/lib/congressionalLookup.ts
@src/types/schema.ts
@public/data/county-races.json
@src/components/VoterGuide/CountyRaces.tsx

# Key patterns:
# - Demo data labeled with DemoBadge component
# - Candidates array uses Candidate type from schema.ts
# - Incumbent info already exists for populated counties
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Python script to generate demo county candidates</name>
  <files>scripts/generate-county-candidates.py</files>
  <action>
Create a Python script that:
1. Reads the existing county-races.json structure
2. Uses SC_COUNTIES list (all 46 counties with FIPS codes) from congressionalLookup.ts as source of truth
3. For each county:
   - Creates 7 standard offices: Sheriff, Auditor, Treasurer, Coroner, Clerk of Court, Register of Deeds, Probate Judge
   - Generates plausible incumbent names (use existing data patterns for populated counties)
   - Assigns incumbent party based on county demographics (use CD mapping for lean - CD-1,2,5,7 = R-leaning, CD-3,4 = Strong R, CD-6 = D-leaning)
   - Generates 1-2 demo candidates per race with realistic names
4. Preserves existing data for the 10 already-populated counties
5. Outputs updated county-races.json with lastUpdated timestamp

Use `scripts/enrich-parties.py` patterns for file I/O. Use realistic South Carolina names (common surnames: Smith, Johnson, Williams, Brown, Davis, Anderson, Thompson, Wilson, Moore, Taylor, Jackson, White, Harris, Martin, Robinson, Clark, Lewis, Scott, Hall, Adams).

Avoid:
- Do NOT use random generation that produces different output each run - use deterministic seed based on county name
- Do NOT overwrite existing incumbent data for populated counties
  </action>
  <verify>python scripts/generate-county-candidates.py --dry-run shows expected output without writing</verify>
  <done>Script executes without errors and produces valid JSON structure</done>
</task>

<task type="auto">
  <name>Task 2: Generate and validate county candidate data</name>
  <files>public/data/county-races.json</files>
  <action>
1. Run the generation script: `python scripts/generate-county-candidates.py`
2. Validate the output:
   - All 46 counties present in JSON
   - Each county has exactly 7 races
   - Each race has incumbent data (name, party)
   - Each race has 1-2 candidates in candidates array
   - lastUpdated timestamp is current
3. Verify JSON is valid: `cat public/data/county-races.json | jq '.' > /dev/null`

The generated data should follow these patterns:
- Incumbent party distribution reflects SC county demographics
- Candidate names are realistic South Carolina names
- Each candidate has: name, party (Democratic/Republican), isDemo: true flag
  </action>
  <verify>cat public/data/county-races.json | jq '.counties | keys | length' returns 46</verify>
  <done>county-races.json contains all 46 SC counties with complete race data</done>
</task>

<task type="auto">
  <name>Task 3: Verify voter guide displays new counties</name>
  <files>N/A (verification only)</files>
  <action>
1. Start dev server: npm run dev
2. Open voter guide: http://localhost:3000/voter-guide
3. Test address lookup for a county that was NOT previously populated (e.g., "123 Main St, Abbeville, SC 29620")
4. Confirm CountyRaces component displays the county offices with candidates
5. Verify build passes: npm run build

Also verify:
- The 10 originally populated counties still display correctly (no regression)
- Candidate cards render with party badges
- "No candidates filed yet" message no longer appears for generated counties
  </action>
  <verify>npm run build completes successfully without errors</verify>
  <done>Voter guide displays county races for any SC address, build passes</done>
</task>

</tasks>

<verification>
Before declaring phase complete:
- [ ] All 46 SC counties present in county-races.json
- [ ] Each county has 7 races (Sheriff, Auditor, Treasurer, Coroner, Clerk of Court, Register of Deeds, Probate Judge)
- [ ] JSON is valid (jq parses without errors)
- [ ] npm run build succeeds
- [ ] Voter guide displays county races for addresses in previously-unpopulated counties
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- county-races.json expanded from 10 to 46 counties
- No regression in existing functionality
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/02-county-candidate-data/02-01-SUMMARY.md`:

# Phase 2 Plan 01: County Candidate Data Summary

**[One-liner: What shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]

## Files Created/Modified

- `scripts/generate-county-candidates.py` - Description
- `public/data/county-races.json` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for Phase 3: DemoBadge Integration
</output>
